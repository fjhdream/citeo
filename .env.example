# OpenAI Configuration
OPENAI_API_KEY=sk-your-api-key-here
# Optional: Custom base URL for OpenAI-compatible APIs (e.g., Azure, local models)
# OPENAI_BASE_URL=https://your-custom-endpoint.com/v1

# OpenAI Tracing (optional)
# If using custom base URL, provide a separate OpenAI API key for tracing
# OPENAI_TRACING_API_KEY=sk-your-official-openai-key-here
# Or disable tracing entirely (auto-disabled when using custom base URL without tracing key)
# OPENAI_TRACING_ENABLED=false

# Notification Channels (comma-separated for multiple: "telegram,feishu")
NOTIFIER_TYPES=["telegram"]

# Telegram Configuration (required if using telegram)
TELEGRAM_BOT_TOKEN=your-bot-token-here
TELEGRAM_CHAT_ID=your-chat-id-here

# Feishu Configuration (required if using feishu)
# FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/xxx
# FEISHU_SECRET=your-signing-secret-optional

# Application Settings
DEBUG=false
LOG_LEVEL=INFO
LOG_JSON=false

# Database Configuration
# Database type: "sqlite" or "d1"
DB_TYPE=sqlite

# SQLite Configuration (used when DB_TYPE=sqlite)
DB_PATH=data/citeo.db

# Cloudflare D1 Configuration (used when DB_TYPE=d1)
# Get these from your Cloudflare dashboard: https://dash.cloudflare.com/
# D1_ACCOUNT_ID=your-cloudflare-account-id
# D1_DATABASE_ID=your-d1-database-id
# D1_API_TOKEN=your-cloudflare-api-token-with-d1-permissions

# Schedule (24-hour format)
DAILY_FETCH_HOUR=8
DAILY_FETCH_MINUTE=0

# AI Settings
OPENAI_MODEL=gpt-4o
OPENAI_TIMEOUT=60
ENABLE_TRANSLATION=true
AI_MAX_CONCURRENT=5

# Notification Filtering
# Minimum programmer recommendation score (1-10) for sending notifications
# Papers with score >= this value will be pushed to Telegram/Feishu
# Default: 8.0 (only highly relevant papers for programmers)
# Examples:
#   8.0 = Only papers with significant value for software engineering/agents
#   6.0 = Include papers with moderate relevance
#   9.0 = Only breakthrough papers
MIN_NOTIFICATION_SCORE=8.0

# RSS Settings
RSS_FETCH_TIMEOUT=30

# API Settings
API_HOST=0.0.0.0
API_PORT=8000

# ============= Authentication Configuration =============

# Enable/disable authentication (default: true)
AUTH_ENABLED=true

# API Key Authentication (at least 16 characters recommended)
# Use this for simple authentication with X-API-Key header
# Also used for getting JWT tokens via /api/auth/token
AUTH_API_KEY=your-secure-api-key-min-16-chars

# JWT Authentication (at least 32 characters recommended)
# Use this for token-based authentication with Bearer tokens
AUTH_JWT_SECRET=your-jwt-secret-at-least-32-characters-long

# Access Token expiry in minutes (default: 60)
# Short-lived token for API access
AUTH_JWT_ACCESS_TOKEN_EXPIRY_MINUTES=60

# Refresh Token expiry in days (default: 7)
# Long-lived token for getting new access tokens
AUTH_JWT_REFRESH_TOKEN_EXPIRY_DAYS=7

# ============= Rate Limiting =============

# Rate limiting for /analyze endpoint
# Protects expensive OpenAI API calls
RATE_LIMIT_ANALYZE_REQUESTS=10
RATE_LIMIT_ANALYZE_WINDOW=60

# ============= Signed URL Configuration =============

# Signed URL secret for notification deep analysis links
# REQUIRED for enabling "深度分析" links in Telegram/Feishu notifications
# Generate with: openssl rand -hex 32
# Minimum 16 characters, 32+ recommended for security
SIGNED_URL_SECRET=64-character-hex-string-here

# Signed URL expiry time in hours (default: 24)
# How long the analysis link remains valid after generation
# Recommended: 24 hours (1 day) - long enough to click later, short enough for security
# SIGNED_URL_EXPIRY_HOURS=24

# API Base URL for generating notification links
# REQUIRED in production for correct URL generation
# Development: http://localhost:8000
# Production: https://your-domain.com
API_BASE_URL=http://localhost:8000
